{% extends "admin/base.html" %}

{% block content %}
<h1 class="text-3xl font-bold text-leather-dark mb-8">{% if user %}Редактировать пользователя{% else %}Новый пользователь{% endif %}</h1>

<div class="bg-white rounded-sm shadow p-8">
    <form method="POST" class="space-y-6">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Имя пользователя</label>
            <input type="text" name="username" value="{{ user.username if user else '' }}" required class="w-full px-4 py-2 border border-gray-300 rounded-sm focus:outline-none focus:border-leather-dark">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
            <input type="email" name="email" value="{{ user.email if user else '' }}" required class="w-full px-4 py-2 border border-gray-300 rounded-sm focus:outline-none focus:border-leather-dark">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Полное имя</label>
            <input type="text" name="full_name" value="{{ user.full_name if user else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-sm focus:outline-none focus:border-leather-dark">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Телефон</label>
            <input type="tel" name="phone" value="{{ user.phone if user else '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-sm focus:outline-none focus:border-leather-dark">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Адрес</label>
            <textarea name="address" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-sm focus:outline-none focus:border-leather-dark">{{ user.address if user else '' }}</textarea>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Роль</label>
            <select name="role" class="w-full px-4 py-2 border border-gray-300 rounded-sm focus:outline-none focus:border-leather-dark">
                <option value="admin" {% if user and user.role.value == 'admin' %}selected{% endif %}>Администратор</option>
                <option value="manager" {% if user and user.role.value == 'manager' %}selected{% endif %}>Менеджер</option>
                <option value="user" {% if user and user.role.value == 'user' %}selected{% endif %}>Пользователь</option>
            </select>
        </div>
        <div>
            <label class="flex items-center">
                <input type="checkbox" name="is_active" {% if not user or user.is_active %}checked{% endif %} class="mr-2">
                <span class="text-sm text-gray-700">Активен</span>
            </label>
        </div>
        {% if user %}
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Новый пароль (оставьте пустым, если не хотите менять)</label>
            <input type="password" name="password" class="w-full px-4 py-2 border border-gray-300 rounded-sm focus:outline-none focus:border-leather-dark">
        </div>
        {% endif %}
        <div class="flex gap-4">
            <button type="submit" class="btn btn-primary px-6 py-2">Сохранить</button>
            <a href="{{ url_for('admin.users') }}" class="btn btn-secondary px-6 py-2">Отмена</a>
        </div>
    </form>
</div>
{% endblock %}

