# Функциональность LeatherCraft

Полное описание всех функций и возможностей интернет-магазина LeatherCraft.

## Содержание

1. [Публичная часть сайта](#публичная-часть-сайта)
2. [Система ролей и доступа](#система-ролей-и-доступа)
3. [Управление контентом](#управление-контентом)
4. [Каталог товаров](#каталог-товаров)
5. [Система заказов](#система-заказов)
6. [Блог](#блог)
7. [Доступность](#доступность)
8. [Обработка ошибок](#обработка-ошибок)

---

## Публичная часть сайта

### Главная страница

- **Hero-секция со слайдшоу:**
  - Настраиваемые слайды с изображениями, заголовками и текстом
  - Кнопки перехода на другие страницы
  - Автоматическая прокрутка
  - Ручная навигация
  - Управление через админ-панель

- **Популярные товары:**
  - Отображение избранных товаров
  - Карточки с изображениями, названиями и ценами
  - Ссылки на страницы товаров

- **Последние статьи блога:**
  - Превью последних опубликованных статей
  - Изображения, заголовки и краткие описания
  - Ссылки на полные статьи

### Каталог товаров

- **Фильтрация:**
  - По категориям
  - Поиск по названию
  - Комбинированная фильтрация

- **Отображение товаров:**
  - Сетка товаров с карточками
  - Изображения товаров
  - Названия и цены
  - Краткие описания
  - Ссылки на детальные страницы

- **Пагинация:**
  - Разбиение на страницы при большом количестве товаров
  - Навигация между страницами

### Страница товара

- **Детальная информация:**
  - Изображение товара (загруженное или по URL)
  - Название и цена
  - Полное описание
  - Количество на складе
  - Кнопка добавления в корзину

- **Похожие товары:**
  - Автоматический подбор товаров из той же категории
  - Отображение внизу страницы

### Страница "О компании"

- **Динамический контент:**
  - Основной текст о компании (управляется через CMS)
  - Статистика (годы опыта, количество мастеров, страны)
  - 4 изображения (загружаемые или по URL)

### Страница контактов

- **Контактная информация:**
  - Адрес (управляется через CMS)
  - Телефон (управляется через CMS)
  - Email (управляется через CMS)
  - Часы работы (управляются через CMS)

- **Форма обратной связи:**
  - Имя отправителя
  - Email
  - Телефон (необязательно)
  - Тема сообщения
  - Текст сообщения
  - Сохранение в базе данных
  - Доступность в админ-панели и панели менеджера

### Блог

- **Список статей:**
  - Пагинация
  - Изображения статей
  - Заголовки и краткие описания
  - Даты публикации
  - Ссылки на полные статьи

- **Страница статьи:**
  - Полный текст статьи
  - Изображение
  - Дата публикации
  - Похожие статьи

### Карта сайта

- **Полная навигация:**
  - Все основные страницы
  - Все категории товаров
  - Все товары
  - Все опубликованные статьи блога
  - Структурированное отображение

---

## Система ролей и доступа

### Роли пользователей

1. **USER (Пользователь):**
   - Просмотр каталога
   - Добавление товаров в корзину
   - Оформление заказов
   - Просмотр истории заказов
   - Редактирование профиля

2. **MANAGER (Менеджер):**
   - Все функции пользователя
   - Управление товарами (создание, редактирование, обновление количества)
   - Управление заказами (просмотр, изменение статусов)
   - Управление блогом (создание, редактирование, публикация статей)
   - Просмотр и управление обращениями
   - **Не может:** управлять пользователями, категориями, системным контентом, удалять товары и статьи

3. **ADMIN (Администратор):**
   - Все функции менеджера
   - Управление пользователями (создание, редактирование, изменение ролей)
   - Управление категориями (создание, редактирование, удаление)
   - Полное управление контентом (CMS)
   - Управление слайдами Hero
   - Удаление товаров и статей
   - Просмотр полной статистики

### Контроль доступа

- **Декораторы доступа:**
  - `@admin_required` - только для администраторов
  - `@manager_required` - для менеджеров и администраторов
  - `@login_required` - для авторизованных пользователей

- **Условное отображение:**
  - Элементы интерфейса скрываются в зависимости от роли
  - Меню админ-панели адаптируется под роль пользователя

---

## Управление контентом

### CMS (Content Management System)

- **Управление контентом через базу данных:**
  - Все тексты сайта хранятся в базе данных
  - Редактирование без изменения кода
  - Группировка по секциям (hero, about, contact, other)

- **Типы контента:**
  - Текст
  - Изображение (URL или загруженный файл)
  - HTML

### Управление страницами

- **Страница About:**
  - Основной текст
  - Статистика (3 показателя)
  - 4 изображения

- **Страница Contact:**
  - Адрес
  - Телефон
  - Email
  - Часы работы

- **Hero-секция:**
  - Настраиваемые слайды
  - Изображения, заголовки, подзаголовки
  - Ссылки и кнопки
  - Порядок отображения
  - Активация/деактивация

---

## Каталог товаров

### Управление товарами

- **Создание и редактирование:**
  - Название и slug
  - Описание (полное и краткое)
  - Цена
  - Количество на складе
  - Категория
  - Изображение (загрузка файла или URL)
  - Статус активности

- **Изображения:**
  - Поддержка форматов: PNG, JPG, JPEG, GIF, WEBP
  - Автоматическое создание уникальных имен файлов
  - Приоритет загруженного файла над URL
  - Автоматическое удаление старых файлов при замене

### Категории

- **Управление категориями:**
  - Создание категорий
  - Редактирование
  - Удаление (только если нет товаров в категории)
  - Slug для URL

- **Связь с товарами:**
  - Каждый товар принадлежит категории
  - Фильтрация по категориям в каталоге

---

## Система заказов

### Создание заказа

- **Процесс оформления:**
  1. Добавление товаров в корзину
  2. Переход к оформлению
  3. Заполнение данных доставки
  4. Подтверждение заказа

- **Данные заказа:**
  - Список товаров с количеством
  - Цены на момент заказа
  - Общая сумма
  - Адрес доставки
  - Телефон
  - Комментарий

### Управление заказами

- **Статусы заказов:**
  - **Pending** - Ожидает обработки
  - **Processing** - В обработке
  - **Shipped** - Отправлен
  - **Delivered** - Доставлен
  - **Cancelled** - Отменен

- **Изменение статусов:**
  - Доступно менеджерам и администраторам
  - Отслеживание в истории заказов пользователя

### Корзина

- **Функциональность:**
  - Добавление товаров
  - Изменение количества
  - Удаление товаров
  - Пересчет суммы
  - Сохранение между сеансами (для авторизованных)

---

## Блог

### Управление статьями

- **Создание и редактирование:**
  - Заголовок и slug
  - Краткое описание (анонс)
  - Полный текст статьи
  - Изображение (загрузка файла или URL)
  - Статус публикации

- **Публикация:**
  - Черновики (неопубликованные статьи)
  - Публикация на сайте
  - Автоматическое отображение в списке статей

### Отображение на сайте

- **Список статей:**
  - Пагинация
  - Изображения, заголовки, анонсы
  - Даты публикации

- **Страница статьи:**
  - Полный текст
  - Изображение
  - Похожие статьи

---

## Доступность

### Режим для слабовидящих

- **Соответствие ГОСТ Р 52872-2019:**
  - Контрастность не менее 4.5:1
  - Размер шрифта минимум 18px (14pt)
  - Четкие границы элементов (2-3px)
  - Увеличенные отступы
  - Упрощенная цветовая схема

- **Особенности:**
  - Черно-белая палитра с синими акцентами
  - Увеличенные размеры кнопок (минимум 44x44px)
  - Подчеркнутые ссылки
  - Улучшенная видимость фокуса
  - Обесцвечивание изображений с увеличением контраста

### Переключатель стилей

- **Кнопка переключения:**
  - Расположена в правом нижнем углу
  - Иконка глаза
  - Сохранение выбора в localStorage
  - Применение при следующих посещениях

---

## Обработка ошибок

### Страницы ошибок

1. **403 Forbidden:**
   - Отображается при попытке доступа к запрещенным ресурсам
   - Навигация на главную страницу
   - Ссылки на основные разделы

2. **404 Not Found:**
   - Отображается для несуществующих страниц
   - Навигация на главную страницу
   - Ссылки на основные разделы

3. **500 Internal Server Error:**
   - Отображается при внутренних ошибках сервера
   - Автоматический откат транзакций базы данных
   - Навигация на главную страницу

### Обработка форм

- **Валидация:**
  - Проверка обязательных полей
  - Проверка форматов (email, телефон)
  - Проверка уникальности (username, email)
  - Проверка паролей (минимальная длина, совпадение)

- **Сообщения об ошибках:**
  - Flash-сообщения для пользователя
  - Категории сообщений (error, success, info)
  - Отображение на всех страницах

---

## Дополнительные функции

### Загрузка файлов

- **Поддерживаемые форматы:**
  - Изображения: PNG, JPG, JPEG, GIF, WEBP
  - Автоматическая валидация расширений

- **Обработка файлов:**
  - Создание уникальных имен (timestamp)
  - Безопасные имена файлов (secure_filename)
  - Сохранение в `app/static/uploads/`
  - Автоматическое удаление старых файлов

### Автоматическая инициализация

- **База данных:**
  - Автоматическое создание таблиц при первом запуске
  - Автоматическое заполнение начальными данными
  - Создание пользователей по умолчанию
  - Создание категорий и товаров-примеров
  - Создание контента по умолчанию

---

## Технические особенности

### Архитектура

- **Модульная структура:**
  - Blueprints для разделения функциональности
  - Отдельные модули для admin, user, auth
  - Переиспользуемые компоненты

- **База данных:**
  - SQLAlchemy ORM
  - SQLite для разработки
  - Легкая миграция на PostgreSQL/MySQL

### Безопасность

- **Аутентификация:**
  - Хеширование паролей (Flask-Bcrypt)
  - Сессии пользователей (Flask-Login)
  - Защита от CSRF (встроено в Flask)

- **Контроль доступа:**
  - Ролевая модель доступа
  - Декораторы для проверки прав
  - Обработка ошибок доступа (403)

### Производительность

- **Оптимизация:**
  - Пагинация для больших списков
  - Индексы в базе данных
  - Кэширование статических файлов

---

## Интеграции

### Внешние библиотеки

- **Frontend:**
  - Tailwind CSS (стилизация)
  - Alpine.js (интерактивность)
  - Swiper.js (слайдшоу)
  - Font Awesome (иконки)

- **Backend:**
  - Flask (веб-фреймворк)
  - SQLAlchemy (ORM)
  - Flask-Login (аутентификация)
  - Flask-Bcrypt (хеширование паролей)

---